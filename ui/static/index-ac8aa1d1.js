import{s as k,J as L,L as V,r as y,c as p,M as b,g as t,f as n,j as g,P as C,l as U,m as N,E as R,n as M,Q as T,R as j,d as z,e as F,S as E,G as B}from"./index-dd5480ba.js";import{E as I,a as P}from"./el-table-column-af935453.js";import{u as q}from"./page-0eaa0be3.js";import{v as A}from"./directive-a9448ffa.js";import{E as G}from"./index-fb28953f.js";function J(l){return k({url:"/namespace",params:l})}function O(l){return k({url:"/namespace",method:"post",data:l})}function Q(l){return k({url:"/namespace",method:"delete",data:l})}const S={__name:"add-edit-dialog",props:{visible:{type:Boolean},visibleModifiers:{},formData:{type:Object},formDataModifiers:{}},emits:L(["done"],["update:visible","update:formData"]),setup(l,{emit:f}){const u=f,o=V(l,"visible"),s=V(l,"formData"),r=y(),_=async()=>{await r.value.validate(),await O(s.value),o.value=!1,u("done"),C.success("成功")};return(w,e)=>{const D=U,m=N,a=R,c=M,v=T;return p(),b(v,{title:"添加命名空间",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=i=>o.value=i),"close-on-click-modal":!1,width:"30%"},{footer:t(()=>[n(c,{onClick:e[1]||(e[1]=i=>o.value=!1)},{default:t(()=>[g("取 消")]),_:1}),n(c,{type:"primary",onClick:e[2]||(e[2]=i=>_())},{default:t(()=>[g("确 定")]),_:1})]),default:t(()=>[n(a,{ref_key:"elFormRef",ref:r,model:s.value,"label-width":"100px"},{default:t(()=>[n(m,{label:"命名空间",rules:{required:!0,trigger:"blur",message:"请输入命名空间"},prop:"name"},{default:t(()=>[n(D,{modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=i=>s.value.name=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},h={class:"app-container"},H=F("p",{class:"page-title"},"命名空间列表",-1),K={class:"filter-container"},te={__name:"index",setup(l){const f=()=>({name:""}),u=y(!1),o=y(f()),s=async()=>{r.value=!0;const{data:m}=await J(w.value);_.value=m,r.value=!1},{tableLoading:r,list:_,params:w}=q(s),e=()=>{u.value=!0,o.value=f()},D=async({name:m})=>{await G.confirm("删除命名空间不可恢复","警告");const{message:a}=await Q({name:m});C.success(a),s()};return(m,a)=>{const c=M,v=P,i=I,x=j("permission"),$=A;return p(),z("div",h,[H,F("div",K,[E((p(),b(c,{type:"primary",size:"default",plain:"",onClick:a[0]||(a[0]=d=>e())},{default:t(()=>[g(" 添加命名空间 ")]),_:1})),[[x,"namespace:add"]])]),E((p(),b(i,{"element-loading-text":"加载中...",border:"",data:B(_)},{default:t(()=>[n(v,{align:"center",label:"命名空间",prop:"name"}),n(v,{align:"center",width:"170px",label:"操作"},{default:t(({row:d})=>[E((p(),b(c,{size:"small",type:"danger",onClick:W=>D(d)},{default:t(()=>[g(" 删除 ")]),_:2},1032,["onClick"])),[[x,"namespace:del"]])]),_:1})]),_:1},8,["data"])),[[$,B(r)]]),n(S,{visible:u.value,"onUpdate:visible":a[1]||(a[1]=d=>u.value=d),formData:o.value,"onUpdate:formData":a[2]||(a[2]=d=>o.value=d),onDone:s},null,8,["visible","formData"])])}}};export{te as default};
